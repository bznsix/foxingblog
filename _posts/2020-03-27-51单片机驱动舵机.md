### 舵机控制原理

　　控制信号由接收机的通道进入信号调制芯片，获得直流偏置电压。它内部有一个基准[电路](http://www.hqpcb.com/zhuoluye8)，产生周期为20ms，宽度为1.5ms的基准信号，将获得的直流偏置电压与[电位器](http://www.hqchip.com/app/854)的电压比较，获得电压差输出。最后，电压差的正负输出到电机驱动芯片决定电机的正反转。当电机转速一定时，通过级联减速齿轮带动电位器旋转，使得电压差为0，电机停止转动。

　　舵机的控制一般需要一个20ms左右的时基脉冲，该脉冲的高电平部分一般为0.5ms-2.5ms范围内的角度控制脉冲部分，总间隔为2ms。以180度角度伺服为例，那么对应的控制关系是这样的：

　　*0.5ms--------------0度；*

　　*1.0ms------------45度；*

　　*1.5ms------------90度；*

　　*2.0ms-----------135度；*

　　*2.5ms-----------180度；*

​	本次采用了STC15W104作为主控来操控舵机。使用STC15W104的定时器0.配置在12T模式下。工作主频为11.0592MHZ。

​	工作在12T模式下，定时的溢出值为65535我们可以很简单的计算出1MS定时器中所需要装载的值为

65536-FOSC/12/1000。当脉冲为1.5MS时舵机处于中立位置。由上述的表格我们可以很简单得到一个所需角度和需要重装的值的表达式那就是 (（x/45+1)*0.5)*(65536-FOSC/12/1000)。如此就可精准的控制舵机说转过的角度。同时我们也可以利用int来对表达式进行强制取整来忽略小小的误差。

### 代码部分